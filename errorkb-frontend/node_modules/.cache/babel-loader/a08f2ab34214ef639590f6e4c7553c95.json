{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _slicedToArray from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import TextField from'@material-ui/core/TextField';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Grid from'@material-ui/core/Grid';import AuthApi from\"./AuthApi\";import{useCookies}from'react-cookie';var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1),width:250}}};});export default function Login(){var _useCookies=useCookies(['user']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var Auth=React.useContext(AuthApi);var handleOnClick=function handleOnClick(){var url,response,data;return _regeneratorRuntime.async(function handleOnClick$(_context){while(1){switch(_context.prev=_context.next){case 0:if(password==null){setPassword(\"\");}if(username==null){setUsername(\"\");}url=\"http://localhost:8080/errorkb/api/GetUser/?username=\"+username+\"&password=\"+password;_context.next=5;return _regeneratorRuntime.awrap(fetch(url));case 5:response=_context.sent;console.log(url);_context.prev=7;_context.next=10;return _regeneratorRuntime.awrap(response.json());case 10:data=_context.sent;if(response.status==200){Auth.setAuth(true);setCookie(\"user\",data[0].username);setCookie(\"rights\",data[0].privileges);}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);alert(\"wrong credentials\");case 17:_context.prev=17;return _context.finish(17);case 19:console.log(response);case 20:case\"end\":return _context.stop();}}},null,null,[[7,14,17,19]]);};var classes=useStyles();return React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\"},React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',marginTop:'100px'}},React.createElement(Grid,{container:true,spacing:4},React.createElement(Grid,{item:true,xs:5,sm:5}),React.createElement(Grid,{item:true,xs:9,sm:5},React.createElement(TextField,{id:\"standard-username-input\",label:\"Username\",type:\"text\",autoComplete:\"current-username\",value:username,onChange:function onChange(e){setUsername(e.target.value);}})))),React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center'}},React.createElement(Grid,{container:true,spacing:4},React.createElement(Grid,{item:true,xs:5,sm:5}),React.createElement(Grid,{item:true,xs:9,sm:5},React.createElement(TextField,{id:\"standard-password-input\",label:\"Password\",type:\"password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){setPassword(e.target.value);}}),React.createElement(Grid,{item:true,xs:5})))),React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',paddingTop:'10px',paddingLeft:'10px'}},React.createElement(Grid,{container:true,spacing:4},React.createElement(Grid,{item:true,xs:5,sm:5}),React.createElement(Grid,{item:true,xs:8,sm:6},React.createElement(Button,{onClick:handleOnClick,className:classes.root,style:{width:'255px'},variant:\"outlined\",color:\"Primary\"},\"Login\"),React.createElement(Grid,{item:true,xs:5})))));}","map":{"version":3,"sources":["D:/Github/Diplomarbeit/errorkb-frontend/src/components/auth/login.jsx"],"names":["React","useState","TextField","makeStyles","Button","Grid","AuthApi","useCookies","useStyles","theme","root","margin","spacing","width","Login","cookies","setCookie","removeCookie","username","setUsername","password","setPassword","Auth","useContext","handleOnClick","url","fetch","response","console","log","json","data","status","setAuth","privileges","alert","classes","display","alignItems","justifyContent","marginTop","e","target","value","paddingTop","paddingLeft"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AuthApi from \"./AuthApi\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: 250,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function Login() {\r\n    const [cookies, setCookie, removeCookie] = useCookies(['user']);\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const Auth = React.useContext(AuthApi);\r\n\r\n\r\n    const handleOnClick = async () => {\r\n        if(password==null){\r\n            setPassword(\"\");\r\n        }\r\n        if(username==null){\r\n            setUsername(\"\");\r\n        }\r\n        const url = \"http://localhost:8080/errorkb/api/GetUser/?username=\" + username+\"&password=\"+password;\r\n        const response = await fetch(url);\r\n        console.log(url);\r\n        try{\r\n            const data = await response.json();\r\n            if(response.status==200){\r\n                Auth.setAuth(true);\r\n                setCookie(\"user\", data[0].username);\r\n                setCookie(\"rights\", data[0].privileges);\r\n            }\r\n        }\r\n        catch{\r\n            alert(\"wrong credentials\");\r\n        }\r\n        finally{\r\n\r\n        }\r\n\r\n        console.log(response);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n        const classes = useStyles();\r\n\r\n        return (\r\n\r\n            <form className={classes.root} noValidate autoComplete=\"off\">\r\n\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    marginTop: '100px',\r\n                }}>\r\n                    <Grid container spacing={4}>\r\n                        <Grid item xs={5} sm={5}/>\r\n                        <Grid item xs={9} sm={5}>\r\n                            <TextField\r\n                                id=\"standard-username-input\"\r\n                                label=\"Username\"\r\n                                type=\"text\"\r\n                                autoComplete=\"current-username\"\r\n                                value={username}\r\n                                onChange={\r\n                                    (e) => {\r\n                                        setUsername(e.target.value);\r\n                                    }}\r\n                            />\r\n                        </Grid>\r\n\r\n                    </Grid>\r\n                </div>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                }}>\r\n                    <Grid container spacing={4}>\r\n                        <Grid item xs={5} sm={5}/>\r\n                        <Grid item xs={9} sm={5}>\r\n                            <TextField\r\n                                id=\"standard-password-input\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                autoComplete=\"current-password\"\r\n                                value={password}\r\n                                onChange={\r\n                                    (e) => {\r\n                                        setPassword(e.target.value)\r\n                                    }}\r\n                            />\r\n                            <Grid item xs={5}/>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                </div>\r\n\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    paddingTop: '10px',\r\n                    paddingLeft: '10px',\r\n                }}>\r\n                    <Grid container spacing={4}>\r\n                        <Grid item xs={5} sm={5}/>\r\n\r\n                        <Grid item xs={8} sm={6}>\r\n                            <Button onClick={handleOnClick} className={classes.root} style={{width: '255px'}}\r\n                                    variant=\"outlined\" color=\"Primary\">\r\n                                Login\r\n                            </Button>\r\n                            <Grid item xs={5}/>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n"]},"metadata":{},"sourceType":"module"}