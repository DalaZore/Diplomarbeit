{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\Github\\\\Diplomarbeit\\\\errorkb-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Component,useEffect}from'react';import'../App.css';import{useCookies}from\"react-cookie\";import{forwardRef}from'react';import MaterialTable from'material-table';import AddBox from'@material-ui/icons/AddBox';import ArrowDownward from'@material-ui/icons/ArrowDownward';import Check from'@material-ui/icons/Check';import ChevronLeft from'@material-ui/icons/ChevronLeft';import ChevronRight from'@material-ui/icons/ChevronRight';import Clear from'@material-ui/icons/Clear';import DeleteOutline from'@material-ui/icons/DeleteOutline';import Edit from'@material-ui/icons/Edit';import FilterList from'@material-ui/icons/FilterList';import FirstPage from'@material-ui/icons/FirstPage';import LastPage from'@material-ui/icons/LastPage';import Remove from'@material-ui/icons/Remove';import SaveAlt from'@material-ui/icons/SaveAlt';import Search from'@material-ui/icons/Search';import ViewColumn from'@material-ui/icons/ViewColumn';import{makeStyles}from\"@material-ui/core/styles\";var useStyles=makeStyles(function(theme){return{root:{'& .MuiTextField-root':{margin:theme.spacing(1),width:250}}};});var tableIcons={Add:forwardRef(function(props,ref){return React.createElement(AddBox,Object.assign({},props,{ref:ref}));}),Check:forwardRef(function(props,ref){return React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var request=require('superagent');export default function Dashboard(){var _useCookies=useCookies(['rights']),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _React$useState=React.useState({columns:[{title:'ID',field:'id',editable:'never'},{title:'Status',field:'status',lookup:{open:'open',closed:'closed'}},{title:'Category',field:'category',lookup:{product:'product',process:'process'}},{title:'Category Description',field:'catdesc'},{title:'Title',field:'title'},{title:'Description',field:'desc'},{title:'Assigned user',field:'user'},{title:'Creation date',field:'date',editable:\"never\",type:'datetime'},{title:'Solution',field:'solution'}],data:[]}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var getEntries=function getEntries(){var url,response,entrydata,_loop,i;return _regeneratorRuntime.async(function getEntries$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"http://localhost:8080/errorkb/api/GetAllEntries\";_context.next=3;return _regeneratorRuntime.awrap(fetch(url));case 3:response=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(response.json());case 6:entrydata=_context.sent;_loop=function _loop(i){new Promise(function(resolve){{resolve();setState(function(prevState){var data=_toConsumableArray(prevState.data);data.push({id:entrydata[i].id,status:entrydata[i].status,category:entrydata[i].category,catdesc:entrydata[i].catdesc,title:entrydata[i].title,desc:entrydata[i].description.slice(0,50),user:entrydata[i].user,date:entrydata[i].timestamp,solution:entrydata[i].solution});return _objectSpread({},prevState,{data:data});});}});};for(i=0;i<entrydata.length;i++){_loop(i);}case 9:case\"end\":return _context.stop();}}});};useEffect(function(){getEntries();console.log(window.location.href);},[]);return React.createElement(MaterialTable,{title:\"Entries\",columns:state.columns,data:state.data,icons:tableIcons,detailPanel:[{tooltip:'Show full description',render:function render(rowData){return React.createElement(\"div\",{style:{fontSize:15,display:'block',textAlign:'center'}},'Description: ',rowData.desc);}}],editable:{onRowAdd:function onRowAdd(newData){return new Promise(function(resolve){setTimeout(function(){resolve();setState(function _callee(prevState){var data,url,response;return _regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=_toConsumableArray(prevState.data);_context2.prev=1;if(newData.status!=\"open\"&&newData.status!=\"closed\"){newData.status=\"open\";}if(newData.solution==null){newData.solution=\"\";}if(newData.status==\"open\"&&newData.solution!=\"\"){newData.solution=\"\";alert(\"Warning: You can only provide a solution to a closed entry. The solution gets deleted. The entry is added.\");}if(newData.solution==null){newData.solution=\"\";}if(!(newData.timestamp!=null)){_context2.next=9;break;}alert(\"Timestamp not valid\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 9:if(!(newData.user==null)){_context2.next=12;break;}alert(\"Assign this entry to an user!\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 12:if(!(newData.status==\"closed\"&&newData.solution==null)){_context2.next=15;break;}alert(\"Error: You wanted to close this entry but did not provide any solution\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 15:if(!(newData.title==null||newData.desc==null)){_context2.next=18;break;}alert(\"Please give this entry a title and a description\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 18:if(!(newData.id!=null)){_context2.next=21;break;}alert(\"Error: Invalid ID\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 21:if(!(newData.category!=\"product\"&&newData.category!=\"process\")){_context2.next=24;break;}alert(\"Please assign this entry a category\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 24:if(!(newData.catdesc==null)){_context2.next=27;break;}alert(\"Please enter a Category Description (e.g. Office 2016)\");return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 27:url=\"http://localhost:8080/errorkb/api/PostNewEntry/?tit=\"+newData.title+\"&desc=\"+newData.desc+\"&stat=\"+newData.status+\"&username=\"+newData.user+\"&solution=\"+newData.solution+\"&category=\"+newData.category+\"&catdesc=\"+newData.catdesc;_context2.next=30;return _regeneratorRuntime.awrap(request('POST',url));case 30:response=_context2.sent;if(!(response.status==200)){_context2.next=34;break;}data.push(newData);return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 34:_context2.next=40;break;case 36:_context2.prev=36;_context2.t0=_context2[\"catch\"](1);alert(_context2.t0.message);return _context2.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 40:_context2.prev=40;window.location.reload();return _context2.finish(40);case 43:case\"end\":return _context2.stop();}}},null,null,[[1,36,40,43]]);});},600);});},onRowUpdate:function onRowUpdate(newData,oldData){return new Promise(function(resolve){setTimeout(function(){resolve();if(oldData){console.log(oldData.username);console.log(newData);setState(function _callee2(prevState){var data,url,response;return _regeneratorRuntime.async(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=_toConsumableArray(prevState.data);_context3.prev=1;if(newData.status!=\"open\"&&newData.status!=\"closed\"){newData.status=\"open\";}if(newData.solution==null){newData.solution=\"\";}if(newData.status==\"open\"&&newData.solution!=\"\"){newData.solution=\"\";alert(\"Warning: You can only provide a solution to a closed entry. The solution gets deleted. The entry is added.\");}if(!(newData.timestamp!=null)){_context3.next=8;break;}alert(\"Timestamp not valid\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 8:if(!(newData.user==null)){_context3.next=11;break;}alert(\"Assign this entry to an user!\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 11:if(!(newData.status==\"closed\"&&newData.solution==null)){_context3.next=14;break;}alert(\"Error: You wanted to close this entry but did not provide any solution\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 14:if(!(newData.title==null||newData.desc==null)){_context3.next=17;break;}alert(\"Please give this entry a title and a description\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 17:if(!(newData.id!=oldData.id)){_context3.next=20;break;}alert(\"Error: Invalid ID\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 20:if(!(newData.category!=\"product\"&&newData.category!=\"process\")){_context3.next=23;break;}alert(\"Please assign this entry a category\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 23:if(!(newData.catdesc==null)){_context3.next=26;break;}alert(\"Please enter a Category Description (e.g. Office 2016)\");return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 26:url=\"http://localhost:8080/errorkb/api/PutNewEntry/?id=\"+oldData.id+\"&tit=\"+newData.title+\"&desc=\"+newData.desc+\"&stat=\"+newData.status+\"&username=\"+newData.user+\"&solution=\"+newData.solution+\"&category=\"+newData.category+\"&catdesc=\"+newData.catdesc;_context3.next=29;return _regeneratorRuntime.awrap(request('PUT',url));case 29:response=_context3.sent;if(!(response.status==200)){_context3.next=33;break;}data[data.indexOf(oldData)]=newData;return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 33:_context3.next=39;break;case 35:_context3.prev=35;_context3.t0=_context3[\"catch\"](1);alert(_context3.t0.message);return _context3.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 39:_context3.prev=39;window.location.reload();return _context3.finish(39);case 42:case\"end\":return _context3.stop();}}},null,null,[[1,35,39,42]]);});}},600);});},onRowDelete:function onRowDelete(oldData){return new Promise(function(resolve){setTimeout(function(){resolve();setState(function _callee3(prevState){var data,url,response;return _regeneratorRuntime.async(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=_toConsumableArray(prevState.data);url=\"http://localhost:8080/errorkb/Api/DeleteEntry?id=\"+oldData.id;_context4.prev=2;if(!(cookies.rights==\"admin\")){_context4.next=12;break;}_context4.next=6;return _regeneratorRuntime.awrap(request('DELETE',url));case 6:response=_context4.sent;if(!(response.status==200)){_context4.next=10;break;}data.splice(data.indexOf(oldData),1);return _context4.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 10:_context4.next=14;break;case 12:alert(\"Insufficient permissions\");return _context4.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 14:_context4.next=20;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](2);alert(_context4.t0.message);return _context4.abrupt(\"return\",_objectSpread({},prevState,{data:data}));case 20:_context4.prev=20;window.location.reload();return _context4.finish(20);case 23:case\"end\":return _context4.stop();}}},null,null,[[2,16,20,23]]);});},600);});}}});}","map":{"version":3,"sources":["D:/Github/Diplomarbeit/errorkb-frontend/src/components/Dashboard.jsx"],"names":["React","Component","useEffect","useCookies","forwardRef","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","makeStyles","useStyles","theme","root","margin","spacing","width","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","request","require","Dashboard","cookies","setCookie","removeCookie","useState","columns","title","field","editable","lookup","open","closed","product","process","type","data","state","setState","getEntries","url","fetch","response","json","entrydata","i","Promise","resolve","prevState","push","id","status","category","catdesc","desc","description","slice","user","date","timestamp","solution","length","console","log","window","location","href","tooltip","render","rowData","fontSize","display","textAlign","onRowAdd","newData","setTimeout","alert","message","reload","onRowUpdate","oldData","username","indexOf","onRowDelete","rights","splice"],"mappings":"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","sourcesContent":["import React, {Component, useEffect} from 'react';\r\nimport '../App.css';\r\nimport {useCookies} from \"react-cookie\";\r\nimport { forwardRef } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Check from '@material-ui/icons/Check';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport SaveAlt from '@material-ui/icons/SaveAlt';\r\nimport Search from '@material-ui/icons/Search';\r\nimport ViewColumn from '@material-ui/icons/ViewColumn';\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: 250,\r\n        },\r\n    },\r\n}));\r\n\r\nconst tableIcons = {\r\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\r\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\r\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\r\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\r\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\r\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\r\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\r\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\r\n    SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\r\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\r\n};\r\n\r\nvar request = require('superagent');\r\n\r\n\r\n\r\nexport default function Dashboard() {\r\n\r\n    const [cookies, setCookie, removeCookie] = useCookies(['rights']);\r\n    const [state, setState] = React.useState({\r\n        columns: [\r\n            { title: 'ID', field: 'id' ,editable:'never'},\r\n            { title: 'Status', field: 'status',lookup:{open:'open',closed:'closed'} },\r\n            { title: 'Category', field: 'category',lookup:{product:'product',process:'process'} },\r\n            { title: 'Category Description', field: 'catdesc' },\r\n            { title: 'Title', field: 'title' },\r\n            { title: 'Description', field: 'desc' },\r\n            { title: 'Assigned user', field: 'user' },\r\n            { title: 'Creation date', field: 'date',editable:\"never\" ,type:'datetime'},\r\n            { title: 'Solution', field: 'solution' },\r\n        ],\r\n        data: [\r\n\r\n        ],\r\n    });\r\n\r\n    const getEntries = async() => {\r\n\r\n        const url = \"http://localhost:8080/errorkb/api/GetAllEntries\";\r\n        const response = await fetch(url);\r\n        const entrydata = await response.json();\r\n        for(let i = 0 ; i < entrydata.length; i++){\r\n            new Promise(resolve => {\r\n                {resolve();\r\n                    setState(prevState => {\r\n                        const data = [...prevState.data];\r\n                        data.push({id:entrydata[i].id,status:entrydata[i].status,category:entrydata[i].category,catdesc:entrydata[i].catdesc,title:entrydata[i].title,desc:entrydata[i].description.slice(0,50),user:entrydata[i].user,date:entrydata[i].timestamp,solution:entrydata[i].solution});\r\n                        return { ...prevState, data };\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        getEntries();\r\n        console.log(window.location.href);\r\n    },[]);\r\n        return(\r\n\r\n            <MaterialTable\r\n                title=\"Entries\"\r\n                columns={state.columns}\r\n                data={state.data}\r\n                icons={tableIcons}\r\n                detailPanel={[\r\n                    {\r\n                        tooltip: 'Show full description',\r\n                        render: rowData => {\r\n                            return (\r\n                                <div\r\n                                    style={{\r\n                                        fontSize: 15,\r\n                                        display:'block',\r\n                                        textAlign:'center',\r\n                                    }}\r\n                                >\r\n                                   {'Description: '}\r\n                                   {rowData.desc}\r\n                                </div>\r\n                            )\r\n                        },\r\n                    }]}\r\n                editable={{\r\n                    onRowAdd: newData =>\r\n                        new Promise(resolve => {\r\n                            setTimeout(() => {\r\n                                resolve();\r\n                                setState(async prevState => {\r\n\r\n                                    const data = [...prevState.data];\r\n                                    try{\r\n                                    if(newData.status != \"open\" && newData.status != \"closed\") {\r\n                                        newData.status = \"open\"\r\n                                    }\r\n                                    if(newData.solution == null){\r\n                                        newData.solution = \"\";\r\n                                    }\r\n                                    if(newData.status == \"open\" && newData.solution != \"\"){\r\n                                        newData.solution = \"\";\r\n                                        alert(\"Warning: You can only provide a solution to a closed entry. The solution gets deleted. The entry is added.\");\r\n                                    }\r\n                                    if(newData.solution == null){\r\n                                        newData.solution = \"\";\r\n                                    }\r\n                                    if(newData.timestamp != null){\r\n                                        alert(\"Timestamp not valid\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.user == null){\r\n                                        alert(\"Assign this entry to an user!\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.status == \"closed\" && newData.solution == null){\r\n                                        alert(\"Error: You wanted to close this entry but did not provide any solution\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.title == null || newData.desc == null){\r\n                                        alert(\"Please give this entry a title and a description\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.id != null){\r\n                                        alert(\"Error: Invalid ID\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.category != \"product\" && newData.category != \"process\"){\r\n                                        alert(\"Please assign this entry a category\");\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    if(newData.catdesc == null){\r\n                                            alert(\"Please enter a Category Description (e.g. Office 2016)\");\r\n                                            return { ...prevState, data };\r\n                                    }\r\n                                    const url = \"http://localhost:8080/errorkb/api/PostNewEntry/?tit=\"+newData.title+\"&desc=\"+newData.desc+\"&stat=\"+newData.status+\"&username=\"+newData.user+\"&solution=\"+newData.solution+\"&category=\"+newData.category+\"&catdesc=\"+newData.catdesc;\r\n\r\n                                        const response = await request('POST',url);\r\n                                        if(response.status==200){\r\n                                            data.push(newData);\r\n                                            return { ...prevState, data };\r\n                                        }\r\n                                    }\r\n                                    catch(error){\r\n                                        alert(error.message)\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    finally{\r\n                                        window.location.reload();\r\n                                    }\r\n                                })\r\n                            }, 600);\r\n                        }),\r\n                    onRowUpdate:\r\n                        (newData, oldData) =>\r\n                            new Promise(resolve => {\r\n                                setTimeout(() => {\r\n                                    resolve();\r\n                                    if (oldData) {\r\n                                        console.log(oldData.username);\r\n                                        console.log(newData);\r\n                                        setState(async prevState => {\r\n                                            const data = [...prevState.data];\r\n                                            try{\r\n\r\n                                                if(newData.status != \"open\" && newData.status != \"closed\") {\r\n                                                    newData.status = \"open\"\r\n                                                }\r\n                                                if(newData.solution==null){\r\n                                                    newData.solution = \"\";\r\n                                                }\r\n                                                if(newData.status == \"open\" && newData.solution != \"\"){\r\n                                                    newData.solution = \"\";\r\n                                                    alert(\"Warning: You can only provide a solution to a closed entry. The solution gets deleted. The entry is added.\");\r\n                                                }\r\n                                                if(newData.timestamp != null){\r\n                                                    alert(\"Timestamp not valid\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.user == null){\r\n                                                    alert(\"Assign this entry to an user!\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.status == \"closed\" && newData.solution == null){\r\n                                                    alert(\"Error: You wanted to close this entry but did not provide any solution\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.title == null || newData.desc == null){\r\n                                                    alert(\"Please give this entry a title and a description\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.id != oldData.id){\r\n                                                    alert(\"Error: Invalid ID\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.category != \"product\" && newData.category != \"process\"){\r\n                                                    alert(\"Please assign this entry a category\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                                if(newData.catdesc == null){\r\n                                                    alert(\"Please enter a Category Description (e.g. Office 2016)\");\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                            const url = \"http://localhost:8080/errorkb/api/PutNewEntry/?id=\"+ oldData.id+\"&tit=\"+newData.title+\"&desc=\"+newData.desc+\"&stat=\"+newData.status+\"&username=\"+newData.user+\"&solution=\"+newData.solution+\"&category=\"+newData.category+\"&catdesc=\"+newData.catdesc;\r\n\r\n                                                const response = await request('PUT',url);\r\n                                                if(response.status==200){\r\n                                                    data[data.indexOf(oldData)] = newData;\r\n                                                    return { ...prevState, data };\r\n                                                }\r\n                                            }\r\n                                            catch(error){\r\n                                                alert(error.message)\r\n                                                return { ...prevState, data };\r\n                                            }\r\n                                            finally{\r\n                                                window.location.reload();\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                }, 600);\r\n                            }),\r\n                    onRowDelete: oldData =>\r\n                        new Promise(resolve => {\r\n                            setTimeout(() => {\r\n                                resolve();\r\n                                setState(async prevState => {\r\n                                    const data = [...prevState.data];\r\n                                    const url = \"http://localhost:8080/errorkb/Api/DeleteEntry?id=\"+oldData.id;\r\n                                    try{\r\n                                        if(cookies.rights == \"admin\"){\r\n                                            const response = await request('DELETE',url);\r\n                                            if(response.status==200){\r\n                                                data.splice(data.indexOf(oldData), 1);\r\n                                                return { ...prevState, data };\r\n                                            }\r\n                                        }\r\n                                        else{\r\n                                            alert(\"Insufficient permissions\");\r\n                                            return { ...prevState, data };\r\n                                        }\r\n\r\n                                    }\r\n                                    catch(error){\r\n                                        alert(error.message)\r\n                                        return { ...prevState, data };\r\n                                    }\r\n                                    finally{\r\n                                        window.location.reload();\r\n                                    }\r\n                                });\r\n                            }, 600);\r\n                        }),\r\n                }}\r\n            />\r\n\r\n\r\n\r\n        );\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}